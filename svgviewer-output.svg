<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->

  
  <!-- Management Server -->
  <g transform="translate(625, 60)">
    <rect x="0" y="0" width="150" height="90" fill="#E74C3C" stroke="#C0392B" stroke-width="3" rx="10"/>
    <text x="75" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Management</text>
    <text x="75" y="55" text-anchor="middle" font-size="14" fill="white">az1-mgmt</text>
    <text x="75" y="75" text-anchor="middle" font-size="14" fill="white">10.1.0.2/24</text>
  </g>
  
  <!-- Spine -->
  <g transform="translate(550, 200)">
    <rect x="0" y="0" width="300" height="120" fill="#156FE0" stroke="#1E88E5" stroke-width="3" rx="10"/>
    <text x="150" y="40" text-anchor="middle" font-size="20" font-weight="bold" fill="white">SPINE</text>
    <text x="150" y="65" text-anchor="middle" font-size="16" fill="white">az1-spine</text>
    
    <!-- IP-VRF Underlay -->
    <rect x="20" y="80" width="260" height="30" fill="#BB8FCE" stroke="#8E44AD" stroke-width="2" rx="5"/>
    <text x="150" y="100" text-anchor="middle" font-size="14" font-weight="bold" fill="white">oob-vrf (IP-VRF)</text>
  </g>
  
  <!-- Leaf 1 -->
  <g transform="translate(150, 450)">
    <rect x="0" y="0" width="350" height="280" fill="#156FE0" stroke="#1E88E5" stroke-width="3" rx="15"/>
    <text x="175" y="35" text-anchor="middle" font-size="22" font-weight="bold" fill="white">LEAF1</text>
    <text x="175" y="60" text-anchor="middle" font-size="16" fill="white">az1-leaf1</text>
    
    <!-- IP-VRF Box -->
    <rect x="25" y="85" width="300" height="60" fill="#BB8FCE" stroke="#8E44AD" stroke-width="2" rx="5"/>
    <text x="175" y="115" text-anchor="middle" font-size="16" font-weight="bold" fill="white">oob-vrf (IP-VRF)</text>
    <text x="175" y="135" text-anchor="middle" font-size="14" fill="white">L3 Routing Instance</text>
    
    <!-- IRB Interface -->
    <g transform="translate(125, 145)">
      <rect x="0" y="0" width="100" height="40" fill="#F1C40F" stroke="#F39C12" stroke-width="3" rx="5"/>
      <text x="50" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#2C3E50">irb0.1</text>
    </g>
    <line x1="175" y1="185" x2="175" y2="210" stroke="#F39C12" stroke-width="4"/>
    <circle cx="175" cy="197" r="5" fill="#F39C12"/>
    
    <!-- MAC-VRF Box -->
    <rect x="25" y="210" width="300" height="80" fill="#81C784" stroke="#66BB6A" stroke-width="2" rx="5"/>
    <text x="175" y="240" text-anchor="middle" font-size="16" font-weight="bold" fill="white">bmc-net (MAC-VRF)</text>
    <text x="175" y="260" text-anchor="middle" font-size="14" fill="white">L2 Instance (10.1.1.0/24)</text>
    
    <!-- Split Horizon Group containing both interfaces -->
    <rect x="60" y="265" width="230" height="20" fill="#FDEBD0" stroke="#F39C12" stroke-width="2" stroke-dasharray="5,3" rx="3"/>
    <text x="80" y="279" text-anchor="middle" font-size="12" font-weight="bold" fill="#2C3E50">SHG:</text>
    <text x="120" y="279" text-anchor="middle" font-size="12" font-weight="bold" fill="#2C3E50">eth2</text>
    <text x="230" y="279" text-anchor="middle" font-size="12" font-weight="bold" fill="#2C3E50">eth3</text>
    
    <!-- ACL Circle -->
    <g transform="translate(255, 165)">
      <circle cx="0" cy="0" r="15" fill="white" fill-opacity="0.8" stroke="#E74C3C" stroke-width="3"/>
      <text x="0" y="5" text-anchor="middle" font-size="13" font-weight="bold" fill="#E74C3C">ACL</text>
      <!-- Short straight arrow to IRB box -->
      <path d="M -20 0 L -25 0" stroke="#E74C3C" stroke-width="2" fill="none"/>
      <polygon points="-27,0 -22,-3 -22,3" fill="#E74C3C"/>
    </g>
  </g>
  
  <!-- Leaf 2 -->
  <g transform="translate(900, 450)">
    <rect x="0" y="0" width="350" height="280" fill="#156FE0" stroke="#1E88E5" stroke-width="3" rx="15"/>
    <text x="175" y="35" text-anchor="middle" font-size="22" font-weight="bold" fill="white">LEAF2</text>
    <text x="175" y="60" text-anchor="middle" font-size="16" fill="white">az1-leaf2</text>
    
    <!-- IP-VRF Box -->
    <rect x="25" y="85" width="300" height="60" fill="#BB8FCE" stroke="#8E44AD" stroke-width="2" rx="5"/>
    <text x="175" y="115" text-anchor="middle" font-size="16" font-weight="bold" fill="white">oob-vrf (IP-VRF)</text>
    <text x="175" y="135" text-anchor="middle" font-size="14" fill="white">L3 Routing Instance</text>
    
    <!-- IRB Interface -->
    <g transform="translate(125, 145)">
      <rect x="0" y="0" width="100" height="40" fill="#F1C40F" stroke="#F39C12" stroke-width="3" rx="5"/>
      <text x="50" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#2C3E50">irb0.1</text>
    </g>
    <line x1="175" y1="185" x2="175" y2="210" stroke="#F39C12" stroke-width="4"/>
    <circle cx="175" cy="197" r="5" fill="#F39C12"/>
    
    <!-- MAC-VRF Box -->
    <rect x="25" y="210" width="300" height="80" fill="#81C784" stroke="#66BB6A" stroke-width="2" rx="5"/>
    <text x="175" y="240" text-anchor="middle" font-size="16" font-weight="bold" fill="white">bmc-net (MAC-VRF)</text>
    <text x="175" y="260" text-anchor="middle" font-size="14" fill="white">L2 Instance (10.1.2.0/24)</text>
    
   
    <!-- Split Horizon Group containing both interfaces -->
    <rect x="60" y="265" width="230" height="20" fill="#FDEBD0" stroke="#F39C12" stroke-width="2" stroke-dasharray="5,3" rx="3"/>
    <text x="80" y="279" text-anchor="middle" font-size="12" font-weight="bold" fill="#2C3E50">SHG:</text>
    <text x="120" y="279" text-anchor="middle" font-size="12" font-weight="bold" fill="#2C3E50">eth2</text>
    <text x="230" y="279" text-anchor="middle" font-size="12" font-weight="bold" fill="#2C3E50">eth3</text>
    
    <!-- ACL Circle moved down and right -->
    <g transform="translate(255, 165)">
      <circle cx="0" cy="0" r="15" fill="white" fill-opacity="0.8" stroke="#E74C3C" stroke-width="3"/>
      <text x="0" y="5" text-anchor="middle" font-size="13" font-weight="bold" fill="#E74C3C">ACL</text>
      <!-- Short straight arrow to IRB box -->
      <path d="M -20 0 L -25 0" stroke="#E74C3C" stroke-width="2" fill="none"/>
      <polygon points="-27,0 -22,-3 -22,3" fill="#E74C3C"/>
    </g>
  </g>
  
  <!-- Servers -->
  <!-- Server 1 -->
  <g transform="translate(175, 820)">
    <rect x="0" y="0" width="120" height="80" fill="#F39C12" stroke="#E67E22" stroke-width="3" rx="10"/>
    <text x="60" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="white">az1-srv1</text>
    <text x="60" y="55" text-anchor="middle" font-size="14" fill="white">10.1.1.11/24</text>
  </g>
  
  <!-- Server 2 -->
  <g transform="translate(355, 820)">
    <rect x="0" y="0" width="120" height="80" fill="#F39C12" stroke="#E67E22" stroke-width="3" rx="10"/>
    <text x="60" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="white">az1-srv2</text>
    <text x="60" y="55" text-anchor="middle" font-size="14" fill="white">10.1.1.12/24</text>
  </g>
  
  <!-- Server 3 -->
  <g transform="translate(925, 820)">
    <rect x="0" y="0" width="120" height="80" fill="#F39C12" stroke="#E67E22" stroke-width="3" rx="10"/>
    <text x="60" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="white">az1-srv3</text>
    <text x="60" y="55" text-anchor="middle" font-size="14" fill="white">10.1.2.11/24</text>
  </g>
  
  <!-- Server 4 -->
  <g transform="translate(1105, 820)">
    <rect x="0" y="0" width="120" height="80" fill="#F39C12" stroke="#E67E22" stroke-width="3" rx="10"/>
    <text x="60" y="35" text-anchor="middle" font-size="16" font-weight="bold" fill="white">az1-srv4</text>
    <text x="60" y="55" text-anchor="middle" font-size="14" fill="white">10.1.2.12/24</text>
  </g>
  
  <!-- Connections -->
  <!-- Management to Spine -->
  <line x1="700" y1="150" x2="700" y2="200" stroke="#34495E" stroke-width="4"/>
  
  <!-- Spine to Leafs -->
  <g>
    <path d="M 600 320 L 350 450" stroke="#1565C0" stroke-width="5"/>
    <!-- OSPF text above the line, avoiding overlap -->
    <text x="470" y="370" text-anchor="middle" font-size="14" font-weight="bold" fill="#1565C0" transform="rotate(-25 470 370)">OSPF</text>
  </g>
  
  <g>
    <path d="M 800 320 L 1050 450" stroke="#1565C0" stroke-width="5"/>
    <!-- OSPF text above the line, avoiding overlap -->
    <text x="930" y="370" text-anchor="middle" font-size="14" font-weight="bold" fill="#1565C0" transform="rotate(25 930 370)">OSPF</text>
  </g>
  
  <!-- Server connections to Leafs ending at SHG boxes -->
  <!-- Srv1 to Leaf1 SHG box (near eth1) -->
  <line x1="235" y1="820" x2="270" y2="740" stroke="#34495E" stroke-width="3"/>
  <!-- Srv2 to Leaf1 SHG box (near eth2) -->
  <line x1="415" y1="820" x2="380" y2="740" stroke="#34495E" stroke-width="3"/>
  <!-- Srv3 to Leaf2 SHG box (near eth1) -->
  <line x1="985" y1="820" x2="1020" y2="740" stroke="#34495E" stroke-width="3"/>
  <!-- Srv4 to Leaf2 SHG box (near eth2) -->
  <line x1="1165" y1="820" x2="1130" y2="740" stroke="#34495E" stroke-width="3"/>
  
  <!-- Legend Box -->
  <g transform="translate(50, 50)">
    <rect x="0" y="0" width="300" height="200" fill="#F8F9F9" stroke="#BDC3C7" stroke-width="2" rx="10"/>
    <text x="150" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#2C3E50">Legend</text>
    
    <rect x="20" y="50" width="30" height="15" fill="#FDEBD0" stroke="#F39C12" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="60" y="62" font-size="14" fill="#2C3E50">Split Horizon Group</text>
    
    <circle cx="35" cy="85" r="12" fill="#E74C3C" fill-opacity="0.2" stroke="#E74C3C" stroke-width="2"/>
    <text x="60" y="90" font-size="14" fill="#2C3E50">ACL Filter (on IRB)</text>
    
    <rect x="20" y="110" width="30" height="15" fill="#F1C40F" stroke="#F39C12" stroke-width="2"/>
    <text x="60" y="123" font-size="14" fill="#2C3E50">IRB Interface</text>
    
    <rect x="20" y="140" width="30" height="15" fill="#BB8FCE" stroke="#8E44AD" stroke-width="2"/>
    <text x="60" y="153" font-size="14" fill="#2C3E50">IP-VRF</text>
    
    <rect x="20" y="170" width="30" height="15" fill="#81C784" stroke="#66BB6A" stroke-width="2"/>
    <text x="60" y="183" font-size="14" fill="#2C3E50">MAC-VRF</text>
  </g>
  
  <!-- Architecture Details Box -->
  <g transform="translate(1050, 50)">
    <rect x="0" y="0" width="300" height="175" fill="#F8F9F9" stroke="#BDC3C7" stroke-width="2" rx="10"/>
    <text x="150" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#2C3E50">Key Features</text>
    
    <text x="20" y="60" font-size="14" fill="#2C3E50">• Single IP-VRF for management network</text>
    <text x="20" y="85" font-size="14" fill="#2C3E50">• OSPF routing between Leaf/Spine</text>
    <text x="20" y="110" font-size="14" fill="#2C3E50">• Separate MAC-VRFs per node with IRB</text>
    <text x="20" y="135" font-size="14" fill="#2C3E50">• ACL filters on IRB interfaces</text>
    <text x="20" y="160" font-size="14" fill="#2C3E50">• SHG to isolate local interfaces</text>
  </g>
</svg>